<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>AT-UI Example</title>
    <script src="node_modules/vue/dist/vue.js"></script>
    <script src="node_modules/at-ui/dist/at.js"></script>
    <link rel="stylesheet" href="node_modules/at-ui-style/css/at.css">
    <link rel="stylesheet" href="node_modules/css/top.css">
    <script src="node_modules/layui/layui.js"></script>
    <link rel="stylesheet" href="node_modules/layui/css/layui.css">
</head>
<body>

    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
        <legend>信息流 - 手工加载</legend>
    </fieldset>

    <ul class="flow-default" style="height: 300px;" id="LAY_demo2"></ul>
<script>
    layui.use('flow', function(){
        var flow = layui.flow;

        flow.load({
            elem: '#LAY_demo2' //流加载容器
            ,done: function(page, next){ //执行下一页的回调

                //模拟数据插入
                setTimeout(function(){
                    var lis = [];
                    // for(var i = 0; i < 8; i++){
                    //     lis.push('<li>'+ ( (page-1)*8 + i + 1 ) +'</li>')
                    // }

                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < 10); //假设总页数为 10
                    console.log("111");
                }, 500);

            }
        });
    });
</script>
</body>
</html>